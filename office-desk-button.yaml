esphome:
  name: office-desk
  friendly_name: Office Desk
  area: Office
  name_add_mac_suffix: True

esp8266:
  board: d1_mini

logger:
api:

ota:
  - platform: esphome
    password: !secret ota_password

wifi:
  ssid: !secret wifi_ssid
  password: !secret wifi_password
  fast_connect: True

button:
  - platform: restart
    name: "Restart"

sensor:
  - platform: wifi_signal
    name: "WiFi Signal"
    update_interval: 60s
  - platform: uptime
    name: "ESP Uptime"
    update_interval: 60s

event:
  - platform: template
    name: Button
    id: button_event
    device_class: button
    event_types:
      - short
      - double
      - long
      - short_long

binary_sensor:
  # Hardware button on GPIO
  - platform: gpio
    id: hw_button
    internal: True
    pin:
      number: D4
      mode:
        input: true
        pullup: true
      inverted: true
    filters:
      - delayed_on: 10ms
      - delayed_off: 10ms
    on_multi_click:
      # Single Short Click
      - timing:
          - ON for at most 750ms
          - OFF for at least 300ms
        then:
          - event.trigger:
              id: button_event
              event_type: short
      # Double Click: two quick presses
      - timing:
          - ON for at most 750ms
          - OFF for at most 300ms
          - ON for at most 750ms
          - OFF for at least 300ms
        then:
          - event.trigger:
              id: button_event
              event_type: double
      # Short then Long: first short, then long press
      - timing:
          - ON for at most 750ms
          - OFF for at most 300ms
          - ON for at least 750ms
        then:
          - event.trigger:
              id: button_event
              event_type: short_long
      # Long Press
      - timing:
          - ON for at least 750ms
        then:
          - event.trigger:
              id: button_event
              event_type: long
